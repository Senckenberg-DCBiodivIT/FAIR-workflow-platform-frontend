{% extends "base.html" %}
{% block title %}{{ name }}{% endblock %}
{% block headline %}{{ name }}{% endblock %}
{% block banner %}
{% with "This site uses fair signposting. <a class=\"link underline black dim\" href=\"https://signposting.org/FAIR/\">Learn more</a> or install <a class=\"black underline dim link\" href=\"https://chromewebstore.google.com/detail/signposting-sniffing/pahanegeimljfcnjogglnamnlcgipmbc\">this chrome extension</a> to visualize it." as banner_text %}
{% include 'banner.html' %}
{% endwith %}
{% endblock %}
{% block content %}
{% load static %}
<section class="mt2 bg-white shadow-1 pa2">
    <h1 class="f4 mb3">Details</h1>
    <table class="f6 w-100 mw8">
        <tbody>
        <tr class="stripe-dark">
            <td class="pa1">PID:</td>
            <td class="pa1"><b>{{ id }}</b></a></td>
        </tr>
        <tr class="stripe-dark">
            <td class="pa1">Description:</td>
            <td class="pa1">{{ description }}</td>
        </tr>
        <tr class="stripe-dark">
            <td class="pa1">Keywords:</td>
            <td class="pa1">{{ keywords|join:", "}}</td>
        </tr>
        <tr class="stripe-dark">
            <td class="pa1">Published:</td>
            <td class="pa1">{{ datePublished }}</td>
        </tr>
        <tr class="stripe-dark">
            <td class="pa1">Author(s):</td>
            <td class="pa1">
                {% for author, author_id in authors %}
                {{ author }} (<a href="{{ author_id }}">{{ author_id }}</a>){% if not forloop.last %}, {% endif %}
                {% endfor %}
            </td>
        </tr>
        <tr class="stripe-dark">
            <td class="pa1">License:</td>
            <td class="pa1">
                {% if license_id %}
                <a href="{{ license_id }}">{{ license_id }}</a>
                {% else %}
                No license
                {% endif %}
            </td>
        </tr>
        <tr class="stripe-dark">
            <td class="pa1">Created at:</td>
            <td class="pa1">
                {{ date_created|date:"d M. Y H:m" }} UTC
            </td>
        </tr>
        <tr class="stripe-dark">
            <td class="pa1">Last modified:</td>
            <td class="pa1">
                {{ date_modified|date:"d M. Y H:m" }} UTC
            </td>
        </tr>
        </tbody>
    </table>
</section>

<div class="mv3">
    <a class="f6 link dim ph3 pv2 mb2 dib white bg-dark-green shadow-1" href="{% url 'dataset_detail' id=id %}?format=json">View Digital Object</a>
    <a class="f6 link dim ph3 pv2 mb2 dib white bg-dark-green shadow-1" href="{% url 'dataset_detail' id=id %}?format=ROCrate">View RO-Crate</a>
    or
    <a class="f6 link dim ph3 pv2 mb2 dib white bg-dark-green shadow-1" href="{% url 'dataset_detail' id=id %}?format=ROCrate&download=true">Download RO-Crate (zip)</a>
</div>


<section class="mt2 bg-white shadow-1 pa2">
    <h1 class="f4 mb3">Provenance</h1>
    {% if provenance %}
    <table class="f6 w-100 mw8">
        <tbody>
        <tr class="stripe-dark">
            <td class="pa1">Agent:</td>
            <td class="pa1">{{ provenance.agent_name }} (<a href="{{ provenance.agent_id }}">{{ provenance.agent_id }})</a></td>
        </tr>
        <tr class="stripe-dark">
            <td class="pa1">Instrument</td>
            <td class="pa1">
                {% if provenance.instrument %}
                <a href="{{ provenance.instrument.url }}">{{ provenance.instrument.name }}</a>
                {% if provenance.instrument.description %}
                ({{ provenance.instrument.description }})
                {% endif %}
                {% else %}
                N/A
                {% endif %}
            </td>
        </tr>
        <tr class="stripe-dark">
            <td class="pa1">Start Time</td>
            <td class="pa1">{{ provenance.start_time|date:"d M. Y H:m" }} UTC</td>
        </tr>
        <tr class="stripe-dark">
            <td class="pa1">End Time</td>
            <td class="pa1">{{ provenance.end_time|date:"d M. Y H:m" }} UTC</td>
        </tr>
        {% if provenance.parameters %}
        <tr class="stripe-dark">
            <td class="pa1">Parameters</td>
            <td class="pa1">
                {% for key, value in provenance.parameters %}
                <span><span class="b">{{ key }}:</span> {{ value }}</span>
                {% endfor %}
            </td>
        </tr>
        {% endif %}
        </tbody>
    </table>
    {% else %}
    Dataset has no provenance data
    {% endif %}
</section>

<section class="mt2 bg-white shadow-1 pa2">
    <h1 class="f4 mb3">Content ({{ images|length }} files)</h1>
    <div class="cf">
    {% for name, img_url, is_img in images %}
        <div class="fl w-25 w-25-m w-20-l pa2">
            <a href="{{ img_url }}">
                {% if is_img %}
                <img src="{{ img_url }}" class="w-100 db outline black-10"/>
                {% else %}
                <img src="{% static 'placeholder.png' %}" class="w-100 db outline black-10"/>
                {% endif %}
                <dl class="mt2 f6 lh-copy">
                    <dt class="clip">Title</dt>
                    <dd class="ml0 black w-100 tc">{{ name }}</dd>
                </dl>
            </a>
        </div>
    {% endfor %}
    </div>
</section>
{% endblock %}